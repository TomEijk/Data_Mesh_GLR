# s 
12
## url
https://docs.microsoft.com/en-us/dotnet/architecture/microservices/microservice-ddd-cqrs-patterns/ddd-oriented-microservice
## tiny url
https://tinyurl.com/api-ddd-s12
## archive url
https://bit.ly/2X6TmNr
## title
Design a DDD-oriented microservice
## source code
no
## example
yes
## source type 
Practitioner Audience Article
## author type
Practitioner
## references
- DDD book

### AXIAL CODING TRACE:
``` python
s12 = CClass(source, "s12", values={
    "title": "Design a DDD-oriented microservice",
    "url": "https://docs.microsoft.com/en-us/dotnet/architecture/microservices/microservice-ddd-cqrs-patterns/ddd-oriented-microservice",
    "archive url": "https://bit.ly/2X6TmNr",
    "author type": "Practitioner",
    "type": "Practitioner Audience Article",
    "example": True,
    "source code": False})

add_links({s12: ddd_book_2004}, role_name="referenced")
```
## additional references
- https://martinfowler.com/bliki/AnemicDomainModel.html
- https://docs.microsoft.com/en-us/dotnet/architecture/microservices/microservice-ddd-cqrs-patterns/domain-model-layer-validations
- DevIQ. Persistence Ignorance principle
https://deviq.com/persistence-ignorance/
- Oren Eini. Infrastructure Ignorance
https://ayende.com/blog/3137/infrastructure-ignorance
- Angel Lopez. Layered Architecture In Domain-Driven Design
https://ajlopez.wordpress.com/2008/09/12/layered-architecture-in-domain-driven-design/



# coding
>Design a DDD-oriented microservice
>Domain-driven design (DDD) advocates modeling based on the reality of business as relevant to your use cases. In the context of building applications, DDD talks about problems as domains. It describes independent problem areas as Bounded Contexts (each Bounded Context correlates to a microservice), and emphasizes a common language to talk about these problems. It also suggests many technical concepts and patterns, like domain entities with rich models (no anemic-domain model), value objects, aggregates and aggregate root (or root entity) rules to support the internal implementation. This section introduces the design and implementation of those internal patterns.
>...

**OPEN CODING TRACE:**
introduction, post is not focused on API, but internal realization.

**AXIAL CODING TRACE:**
added:
``` python
``` 
add codes: 
``` python 
    '''
    '''
```
>Keep the microservice context boundaries relatively small
>....
>Layers in DDD microservices
>For example, an entity could be loaded from the database. Then part of that information, or an aggregation of information including additional data from other entities, can be sent to the client UI through a REST Web API. The point here is that the domain entity is contained within the domain model layer and should not be propagated to other areas that it does not belong to, like to the presentation layer.

**OPEN CODING TRACE:**
mentions entity as resource option, but is about internal impl. mapping

>Additionally, you need to have always-valid entities (see the Designing validations in the domain model layer section) controlled by aggregate roots (root entities). Therefore, entities should not be bound to client views, because at the UI level some data might still not be validated. This is what the ViewModel is for. The ViewModel is a data model exclusively for presentation layer needs. The domain entities do not belong directly to the ViewModel. Instead, you need to translate between ViewModels and domain entities and vice versa.

**OPEN CODING TRACE:**
explains that API (and internal interaction) via aggregate roots is better, e.g. to validate (data consistency)

> When tackling complexity, it is important to have a domain model controlled by aggregate roots that make sure that all the invariants and rules related to that group of entities (aggregate) are performed through a single entry-point or gate, the aggregate root.

**OPEN CODING TRACE:**
complexity discussed here would translate to API complexity.

**AXIAL CODING TRACE:**
add codes to s: 
``` python 
    '''
    aggregate, entity, domain_model, api,
    designing_API_resources_decision, entities_as_API_resources,
    aggregate_roots_as_API_resources, api_complexity, data_consistency,

 ```   

>
> [...] many internal impl. details follow
>
>

> A microservice's application layer in .NET is commonly coded as an ASP.NET Core Web API project. The project implements the microservice's interaction, remote network access, and the external Web APIs used from the UI or client apps. It includes queries if using a CQRS approach, commands accepted by the microservice, and even the event-driven communication between microservices (integration events). The ASP.NET Core Web API that represents the application layer must not contain business rules or domain knowledge (especially domain rules for transactions or updates); these should be owned by the domain model class library. The application layer must only coordinate tasks and must not hold or define any domain state (domain model). It delegates the execution of business rules to the domain model classes themselves (aggregate roots and domain entities), which will ultimately update the data within those domain entities.
>
**OPEN CODING TRACE:**
explains events exposed as integration events, and cqrs style domain operations e.g. as commands

**AXIAL CODING TRACE:**
add codes to s: 
``` python 
    '''
    expose_domain_events_as_state_transitions, domain_operations_on_resources,
operation_design_decision, no_cqrs_API, cqrs_API, cqrs_decision, 
    '''
 ```   
>Dependencies in a DDD Service, the Application layer depends on Domain and Infrastructure, and Infrastructure depends on Domain, but Domain doesn't depend on any layer. This layer design should be independent for each microservice. As noted earlier, you can implement the most complex microservices following DDD patterns, while implementing simpler data-driven microservices (simple CRUD in a single layer) in a simpler way.

**OPEN CODING TRACE:**
- as a consequence some CRUD based operations may end up in the API as well, but seen as: to be seldom used.

**AXIAL CODING TRACE:**
add codes to s: 
``` python 
    '''
     
    '''
 ```  