# s 
9
## url
https://stackoverflow.com/questions/2272601/domain-driven-design-external-data-api-as-respository-or-service
## tiny url
https://tinyurl.com/api-ddd-s9
## archive url
https://bit.ly/2LWhdsH
## title
Domain Driven Design - External Data API as Respository or Service
## source code
no
## example
yes
## source type 
Discussion Forum Post
## author type
Practitioner

### AXIAL CODING TRACE:
``` python
s9 = CClass(source, "s9", values={
    "title": "Domain Driven Design - External Data API as Respository or Service",
    "url": "https://stackoverflow.com/questions/2272601/domain-driven-design-external-data-api-as-respository-or-service",
    "archive url": "https://bit.ly/2LWhdsH",
    "author type": "Practitioner",
    "type": "Discussion Forum Post",
    "example": True,
    "source code": False})
```
# coding
## main post1
>In a blog application developed using domain driven design a 'Post' entity has a related collection of tag entities.

>On creating the post (e.g populating the object from the UI) i would like to call a third party API via REST which takes the content of the post and extracts semantic tags (link text) for association.

>Main Question : What is the best way to design this...

>Is it best designed so that the Post entity would call a domain service such as PostServices.GetTags(Postcontent) passing its content and retrieving back a list of tags.?

**OPEN CODING TRACE:**
this refers to service (DDD), operation design decision and domain operations on resources option

>** PostServices.GetTags would then inteface with the REST API via a further wrapper class.

**OPEN CODING TRACE:**
internal design of call

>Or should the third party API be wrapped as a repository?

**OPEN CODING TRACE:**
internal design of call

>Should the function Post.GenerateTags(), should not exist within the domain entity at all?

>Further questions :

>1 : I have also read that it is not good practice to have a domain entity converse with a domain service. Is this true?

**OPEN CODING TRACE:**
again service and entity (DDD), suggests to expose the domain service via API (i.e., to have it as a resource), 
seen as likely negative.

>2 : Is it ok to get a reference to the PostServices domain service via a factory creation method. e.g...

>IPostService PostService = ServiceUtil.GetPostService(); return PostService.GetTags(Post.content);

**OPEN CODING TRACE:**
internal design

>3 : Is it acceptable to have the domain service coupled to a third party api?

**OPEN CODING TRACE:**
refers to expose domain model as API or a subset of the domain model

>4 : Should the domain entity simply just know how to deal with the tags received via the application layer which has called the REST API.

**OPEN CODING TRACE:**
refers to expose domain model as API or a subset of the domain model. implementation detail of it.

>Slowly trying to get my head around DDD, however I can't seem to find any examples of how to implement this sort of thing.

**AXIAL CODING TRACE:**
added:
``` python 

domain_services_as_API_resources = CClass(practice, "Domain Services as API Resources")

add_decision_option_link(designing_API_resources_decision, domain_services_as_API_resources,
                         "Offer domain services as API resources")

```


add codes to s9: 
``` python 
    '''
    entity, service, domain_model, api, domain_model_mapping_decision, expose_domain_model_as_API, 
    expose_domain_model_subset_as_API, domain_services_as_API_resources, designing_API_resources_decision
    '''
```
- coded forces for domain_services_as_API_resources.

## post2
>In a Blog application, a Post is an Entity and a Tag is a value object. A Tag hasn't got identity. You should have:

>PostsRepository
Post (Entity)
Tag (value object)
A Post has got a list of tags.

**OPEN CODING TRACE:**
additional mentioning of value object

>Questions:

>1 : I have also read that it is not good practice to have a domain entity converse with a domain service. Is this true?

>Yes, itsn't a good practice. You entity hasn't want to be coupled with a domain service. If you do that, then you couldn't reuse them later. Did you have consider to fire a domain event. You can tell your service domain do something fire domain events.
>

**OPEN CODING TRACE:**
confirms service resources option exists. seen as negative too. Forces likely like entity option.

Additionally: consider exposing operations as events which cause a domain event as a state transition to be fired.

reuse force is about the internal use of services, not about the API level


>2. : Is it ok to get a reference to the PostServices domain service via a factory creation method. e.g..IPostService PostService = ServiceUtil.GetPostService(); return PostService.GetTags(Post.content);

>Yes, it's possible. A factory method could return an abstract class or an interface. This is a good Software Design Principle "code to an interface not to an implementation". If you do this, you'll be able to change your implementation later and you won't have to change yout client code.

**OPEN CODING TRACE:**
internal impl. details

>3 : Is it acceptable to have the domain service coupled to a third party api?

>I don't recommend you this, but it is acceptable.

**OPEN CODING TRACE:**
same as above, no new options given

>Sorry, I don't understand question 4.

>Look this link. I hope it help you.

>https://stackoverflow.com/questions/901462/ddd-where-is-it-most-appropriate-to-get-a-list-of-value-objects/901562#901562


**AXIAL CODING TRACE:**
add codes to s9: 
``` python 
    '''
    value_object, expose_domain_events_as_state_transitions, 
    '''
```

